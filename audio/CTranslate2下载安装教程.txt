# RealtimeSTTçš„faster-whisperä¾èµ–çš„CTranslate2åŠ é€Ÿæ¨ç†
# CTranslate2 æ˜¯ä¸€ä¸ª è½»é‡çº§ã€é«˜æ•ˆç‡çš„æ¨ç†å¼•æ“
# ç”±äºç¡¬ä»¶è®¾å¤‡ä¸åŒCTranslate2éœ€è¦ä¸‹è½½å¹¶ç¼–è¯‘
git clone https://github.com/OpenNMT/CTranslate2.git
cd CTranslate2

# å…³é”®ï¼åˆå§‹åŒ–æ‰€æœ‰å­æ¨¡å—ï¼ˆåŒ…æ‹¬ spdlog, xxhash, cpu_features ç­‰ï¼‰
git submodule update --init --recursive
mkdir build && cd build

# ğŸ‘ˆ å¿…é¡»å…³é—­ MKLï¼ˆARM ä¸æ”¯æŒï¼‰-DWITH_MKL=OFF
#  Jetson Orin/Thor æ˜¯ 87     -DCMAKE_CUDA_ARCHITECTURES="87;90"
cmake .. \
  -DPYTHON_EXECUTABLE=$(which python3.13) \
  -DWITH_CUDA=ON \
  -DWITH_CUDNN=ON \
  -DCUDA_TOOLKIT_ROOT_DIR='/usr/local/cuda-13.0' \
  -DWITH_MKL=OFF \
  -DOPENMP_RUNTIME=COMP \
  -DCMAKE_BUILD_TYPE=Release\
  -DCMAKE_CUDA_ARCHITECTURES="87;90"
  
make -j$(nproc)
sudo make install
# åˆ‡æ¢åˆ°Pythonæ–‡ä»¶å¤¹
cd ../python
pip3.13 install -e .